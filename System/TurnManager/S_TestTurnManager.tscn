[gd_scene load_steps=25 format=3 uid="uid://c6rtg8ritwip"]

[ext_resource type="Script" path="res://System/TurnManager/GD_TurnManager.gd" id="1_dflja"]
[ext_resource type="Script" path="res://System/CharacterManager/GD_EnemyManager.gd" id="2_mrvh1"]
[ext_resource type="Script" path="res://System/CharacterManager/GD_PlayerManager.gd" id="5_nehn5"]
[ext_resource type="PackedScene" uid="uid://bbe53oyy08kdb" path="res://Skills/Formation/F_1/S_Formation1.tscn" id="9_dgnif"]
[ext_resource type="PackedScene" uid="uid://ctrtwbaekf8se" path="res://Skills/Formation/F_2/S_Formation2.tscn" id="10_xs2ya"]
[ext_resource type="PackedScene" uid="uid://dyie2k2ftkq5p" path="res://Skills/Formation/F_4/S_Formation4.tscn" id="11_ch5yg"]
[ext_resource type="PackedScene" uid="uid://xdsaw08y6pfy" path="res://Skills/Formation/F_3/S_Formation3.tscn" id="11_uyf1h"]
[ext_resource type="Script" path="res://System/TurnManager/GD_TurnLineManager.gd" id="12_gfjle"]
[ext_resource type="PackedScene" uid="uid://deaafmasgxd4y" path="res://System/TurnManager/S_CharacterGauge.tscn" id="13_1n2f6"]
[ext_resource type="Script" path="res://System/Level/GD_EnemySpawner.gd" id="13_kp5uk"]
[ext_resource type="JSON" path="res://Level/Data/emeny_cood.json" id="14_dciaw"]
[ext_resource type="PackedScene" uid="uid://cwbb5bd1qny4w" path="res://Character/EnemyCharacter_AI/EM1/S_EM1_AI.tscn" id="15_6fe4u"]
[ext_resource type="PackedScene" uid="uid://g73g6o4p2ukg" path="res://Character/EnemyCharacter_AI/EM2/S_EM2_AI.tscn" id="16_u1bhv"]
[ext_resource type="PackedScene" uid="uid://cspcb1h7kr4tf" path="res://Character/EnemyCharacter_AI/EM3/S_EM3_AI.tscn" id="17_qqeb1"]
[ext_resource type="PackedScene" uid="uid://dx3rkyno4p2wb" path="res://Character/EnemyCharacter_AI/EM4/S_EM4_AI.tscn" id="18_d2u3t"]
[ext_resource type="Script" path="res://System/Level/GD_PlayerSpawner.gd" id="18_xd340"]
[ext_resource type="PackedScene" uid="uid://bgd3hb5w3wnip" path="res://Character/EnemyCharacter_AI/Boss1/S_Boss1_AI.tscn" id="19_b5fbv"]
[ext_resource type="JSON" path="res://Level/Data/player_start_cood.json" id="19_bwrv8"]
[ext_resource type="PackedScene" uid="uid://xkgsdj68abw3" path="res://Character/EnemyCharacter_AI/Boss2/S_Boss2_AI.tscn" id="20_lauar"]
[ext_resource type="PackedScene" uid="uid://dlwbobh00tg0w" path="res://Character/PlayerCharacter/PC1/S_PC1.tscn" id="20_swqkd"]
[ext_resource type="PackedScene" uid="uid://dvciusaoi1wv0" path="res://Character/PlayerCharacter/PC2/S_PC2.tscn" id="21_0i0i6"]
[ext_resource type="PackedScene" uid="uid://ci8mf1gmdprq7" path="res://Character/PlayerCharacter/PC3/S_PC3.tscn" id="22_fmeed"]

[sub_resource type="Theme" id="Theme_44u5n"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_661mu"]
bg_color = Color(0, 0.686275, 0.682353, 1)

[node name="S_turn_manager" type="Node2D"]
y_sort_enabled = true
script = ExtResource("1_dflja")
tick_multiplier = 5.0

[node name="EnemyManager" type="Node2D" parent="."]
y_sort_enabled = true
script = ExtResource("2_mrvh1")

[node name="Characters" type="Node2D" parent="EnemyManager"]
y_sort_enabled = true

[node name="PlayerManager" type="Node2D" parent="."]
y_sort_enabled = true
script = ExtResource("5_nehn5")

[node name="Characters" type="Node2D" parent="PlayerManager"]
y_sort_enabled = true

[node name="CanvasLayer" type="CanvasLayer" parent="PlayerManager"]
visible = false

[node name="VBoxContainer" type="HBoxContainer" parent="PlayerManager/CanvasLayer"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -254.0
offset_bottom = 40.0
grow_horizontal = 0
theme = SubResource("Theme_44u5n")
alignment = 2

[node name="F_1" type="Button" parent="PlayerManager/CanvasLayer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 64
text = "F_1"

[node name="S_Formation1" parent="PlayerManager/CanvasLayer/VBoxContainer/F_1" instance=ExtResource("9_dgnif")]

[node name="F_2" type="Button" parent="PlayerManager/CanvasLayer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 64
text = "F_2
"

[node name="S_Formation2" parent="PlayerManager/CanvasLayer/VBoxContainer/F_2" instance=ExtResource("10_xs2ya")]

[node name="F_3" type="Button" parent="PlayerManager/CanvasLayer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 64
text = "F_3
"

[node name="S_Formation3" parent="PlayerManager/CanvasLayer/VBoxContainer/F_3" instance=ExtResource("11_uyf1h")]

[node name="F_4" type="Button" parent="PlayerManager/CanvasLayer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 64
text = "F_4"

[node name="S_Formation4" parent="PlayerManager/CanvasLayer/VBoxContainer/F_4" instance=ExtResource("11_ch5yg")]

[node name="TurnLineManager" type="Panel" parent="PlayerManager/CanvasLayer"]
offset_left = 101.0
offset_top = 99.0
offset_right = 1101.0
offset_bottom = 103.0
theme_override_styles/panel = SubResource("StyleBoxFlat_661mu")
script = ExtResource("12_gfjle")
gauge = ExtResource("13_1n2f6")

[node name="EnemySpawner" type="Node2D" parent="."]
script = ExtResource("13_kp5uk")
level = 1
enemy_data_json = ExtResource("14_dciaw")
EM1 = ExtResource("15_6fe4u")
EM2 = ExtResource("16_u1bhv")
EM3 = ExtResource("17_qqeb1")
EM4 = ExtResource("18_d2u3t")
BOSS1 = ExtResource("19_b5fbv")
BOSS2 = ExtResource("20_lauar")

[node name="MoveTimer" type="Timer" parent="EnemySpawner"]
one_shot = true

[node name="PlayerSpawner" type="Node2D" parent="."]
script = ExtResource("18_xd340")
level = 1
player_data_json = ExtResource("19_bwrv8")
selected_PCX = ExtResource("20_swqkd")
selected_PCY = ExtResource("21_0i0i6")
selected_PCZ = ExtResource("22_fmeed")

[node name="MoveTimer" type="Timer" parent="PlayerSpawner"]
one_shot = true

[connection signal="timeout" from="EnemySpawner/MoveTimer" to="EnemySpawner" method="_on_move_timer_timeout"]
[connection signal="timeout" from="PlayerSpawner/MoveTimer" to="PlayerSpawner" method="_on_move_timer_timeout"]
